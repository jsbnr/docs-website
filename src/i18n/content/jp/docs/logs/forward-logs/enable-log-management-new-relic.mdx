---
title: ログをNew Relicに転送する
tags:
  - Logs
  - Enable log management in New Relic
  - Enable log monitoring in New Relic
metaDescription: How to get your logs into New Relic by using compatible log forwarder plugins.
translationType: machine
---

import demotronHostLogs123021 from 'images/demotron-host-logs-123021.png'

import newRelicLogsInContextDiagram from 'images/new-relic-logs-in-context-diagram.jpg'

New Relic のログ管理機能を使えば、ログデータの収集、処理、探索、照会、警告を行うことができます。ログをNew Relicに取り込むには、以下の方法があります。

* [既存のログ転送ソリューション](#log-forwarding) を利用して、ログを収集し、New Relic に転送するメタデータを拡張します。
* 当社の [インフラエージェント](/docs/logs/forward-logs/forward-your-logs-using-infrastructure-agent) を軽量なデータコレクタとして使用することで、追加のソフトウェアを使用することなく、データ収集が可能です。
* [Log API](/docs/logs/log-api/introduction-log-api) を利用して、HTTP経由でログを転送します。
* [TCPエンドポイント](/docs/logs/log-api/use-tcp-endpoint-forward-logs-new-relic)を介してログを転送するには、syslogプロトコルを使用します。

## 使用方法 [#enable]

ここでは、ホストのUIのログの例を示します。選択した期間のイベントのコンテキストでログを表示したり、ハイライトされた属性の詳細データにドリルダウンしたりできます。さらに多くの機能を利用するには、 **Query logs** from here をクリックして、 **Logs** UI に直接アクセスします。

<img
  title="ホストのコンテキストでログを表示"
  alt="ホストのコンテキストでログを表示"
  src={demotronHostLogs123021}
/>

<figcaption>
  ここでは、あるイベントに関連したホストのログの例を紹介します。
</figcaption>

<CollapserGroup>
  <Collapser
    id="log-forwarding-diagram"
    title="New Relicへのログ転送のライフサイクル"
  >
    次の図は、アプリのログメッセージのライフサイクルを示しています。APMエージェントのメタデータによるエンリッチメント（コンテクストロギング）から、ログデータのフォーマット、New Relicへの転送までを示しています。

    <img
      title="New Relicへのログ転送のライフサイクル"
      alt="New Relicのログをコンテキストダイアグラムで表示"
      src={newRelicLogsInContextDiagram}
    />

    <figcaption>
      この図は、New Relicを介したログメッセージの流れを示しています。
    </figcaption>

    標準的なログフォーマッタは、ログイベントを下流の人々やプロセスが利用できる意味のある出力（テキストファイルなど）に変換します。 `NewRelicFormatter` は、ログイベントを New Relic が期待する JSON 形式に変換します。これらのファイルには、ログ情報と拡張メタデータが含まれています。

    ログフォワーダ（当社のインフラ監視エージェント、Fluentd、Logstashなど）を設定すると、ログデータを拡張し、エンリッチすることもできます。 [ログをコンテキスト](/docs/logs/enable-log-management-new-relic/configure-logs-context/configure-logs-context-apm-agents/) に設定することで、ログエンリッチャーは、フォーマットされたログデータを、アプリケーションやホストからの追加のトランザクション情報とリンクさせます。

    これにより、ログファイルは、強化されたメタデータとコンテクストのあるロギングデータで強化されます。あなたのログフォワーダーは、ファイルを私たちのロギングエンドポイントに送って処理します。そこからは、New Relic のログ管理機能を使って、ログの表示、照会、アラートの設定などを行うことができます。
  </Collapser>
</CollapserGroup>

## ログフォワーダーを始めよう [#compatibility-requirements]

ログをNew Relicに転送して、メタデータを充実させること。

1. New Relicアカウントをまだお持ちでない場合は、[New Relicアカウントを新たに作成します](https://newrelic.com/signup)。永久無料です。
2. New Relic アカウントの [ライセンスキー](/docs/accounts/install-new-relic/account-setup/license-key) を持っています。
3. [互換性のあるログフォワーダーのインストール](#log-forwarding).
4. TCP ポート 443 でのアウトバウンド接続が、 [CIDR 範囲](/docs/using-new-relic/cross-product-functions/install-configure/networks/#infrastructure) （ [地域](/docs/using-new-relic/welcome-new-relic/get-started/our-eu-us-region-data-centers) に一致）に対して許可されていることを確認してください。
5. 設定には、DNS名 `log-api.newrelic.com` または `log-api.eu.newrelic.com` を使用します。
6. New Relic APM エージェントが監視するアプリについては、コンテキスト で [ログを設定します。](/docs/logs/enable-log-management-new-relic/configure-logs-context/configure-logs-context-apm-agents/)
7. [](/docs/logs/enable-log-management-new-relic/configure-logs-context/configure-logs-context-apm-agents/)

## [ログフォワーディングオプション \[#log-forwarding\]](/docs/logs/enable-log-management-new-relic/configure-logs-context/configure-logs-context-apm-agents/)

[これらのソリューションを使用して、ログをNew Relicに転送します。](/docs/logs/enable-log-management-new-relic/configure-logs-context/configure-logs-context-apm-agents/)

[おすすめです。](/docs/logs/enable-log-management-new-relic/configure-logs-context/configure-logs-context-apm-agents/)

* [](/docs/logs/enable-log-management-new-relic/configure-logs-context/configure-logs-context-apm-agents/)
* [](/docs/logs/enable-log-management-new-relic/configure-logs-context/configure-logs-context-apm-agents/)[インフラ監視エージェント](/docs/logs/forward-logs/forward-your-logs-using-infrastructure-agent/)

ガイド付きインストールプロセスを使用して、ログ管理とインフラ監視を一緒に素早く簡単にインストールすることができます。ガイド付きインストールプロセスの仕組みや、New Relic One で表示されるログデータの使用方法については、YouTube の Nerdlog ビデオ（14分46秒）をご覧ください。

<Video
  id="_II9Y-jOE7k"
  type="youtube"
/>

Amazon.co.jp

* [AWS CloudWatchプラグイン](/docs/logs/forward-logs/aws-lambda-sending-cloudwatch-logs/)
* [AWS FireLensプラグイン](/docs/logs/forward-logs/aws-firelens-plugin-log-forwarding/)
* [AWS Kinesis Firehose](/docs/logs/forward-logs/stream-logs-using-kinesis-data-firehose/)
* [S3からのログ送信のためのAWS Lambda](/docs/logs/forward-logs/aws-lambda-sending-logs-s3/)

マイクロソフトです。

* [Azure ARM テンプレート](/docs/logs/forward-logs/azure-log-forwarding/)

その他のログフォワーディングプラグイン

* [クラウドフレア Logpush](/docs/logs/forward-logs/cloudflare-logpush-forwarding/)
* [Fluent Bitプラグイン](/docs/logs/forward-logs/fluent-bit-plugin-log-forwarding/)
* [Fluentdプラグイン](/docs/logs/forward-logs/fluentd-plugin-log-forwarding/)
* [Google Cloud Platform Pub/Sub](/docs/logs/forward-logs/google-cloud-platform-log-forwarding)
* [Herokuのログストリーミング](/docs/logs/forward-logs/heroku-log-forwarding/)
* [Kubernetesプラグイン](/docs/logs/forward-logs/kubernetes-plugin-log-forwarding/)
* [Logstashプラグイン](/docs/logs/forward-logs/logstash-plugin-log-forwarding/)
* [ベクタープラグイン](/docs/logs/forward-logs/vector-output-sink-log-forwarding/)

## TCPエンドポイント [#enable-endpoint]

CDN、ハードウェアデバイス、マネージドサービスなど、状況によってはログフォワーダーがない場合もあります。 `rsyslog` や `syslog-ng` などの syslog プロトコルを使用し、 [TCP エンドポイント](/docs/logs/log-management/log-api/use-tcp-endpoint-forward-logs-new-relic/) を介して New Relic にログを転送することができます。

## ログのAPI [#enable-api]

プラグインをインストールせずにNew Relicに接続したい場合は、HTTP入力の統合を提供しています。このオプションは、 [Log API](/docs/logs/log-api/introduction-log-api) を介して、監視対象のログデータを直接 New Relic に送信します。

## 次のステップ [#what-next]

ログフォワーダーを有効にした後は、ログ管理機能を使ってNew Relicのデータを最大限に活用しましょう。

* [Logs UI](/docs/logs/ui-data/use-logs-ui) を使って、プラットフォーム全体のログデータを調査してください。
* [APM UI](/docs/logs/ui-data/use-logs-ui/#links) で、ログをアプリのパフォーマンスの文脈で見ることができます。 [エラーのトラブルシューティング](/docs/apm/apm-ui-pages/error-analytics/errors-page-find-fix-verify-problems/) [分散トレース](/docs/apm/distributed-tracing/ui-data/understand-use-distributed-tracing-data) 、スタックトレース、アプリケーションログ、その他。
* [インフラ監視エージェント](/docs/logs/forward-logs/forward-your-logs-using-infrastructure-agent/) でログを転送している場合、アプリケーションとプラットフォームの両方のパフォーマンスデータについてより深い可視性を得ることができます。UI で [インフラストラクチャ・ログ](/docs/logs/ui-data/use-logs-ui/#links) を確認します。
* [アラートの設定](/docs/alerts-applied-intelligence/new-relic-alerts/alert-conditions/create-alert-conditions/).
* [データを照会する](/docs/query-your-data/explore-query-data/get-started/introduction-querying-new-relic-data/) と [ダッシュボードを作成する](/docs/query-your-data/explore-query-data/dashboards/introduction-dashboards/).例えば、 [データパーティションルール](/docs/apis/nerdgraph/examples/nerdgraph-data-partition-rules-tutorial) と [ログ解析ルール](/docs/apis/nerdgraph/examples/nerdgraph-log-parsing-rules-tutorial) の問い合わせと管理については、NerdGraph のチュートリアルをご覧ください。
