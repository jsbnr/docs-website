---
title: ログのクエリ構文
tags:
  - Logs
  - Log management
  - UI and data
metaDescription: How to query your logs data in New Relic using the logs query syntax.
translationType: machine
---

import logSummaryQuery from 'images/log-summary-query.png'

[New Relic One](https://one.newrelic.com) の Logs UI を使用すると、数秒で素早くログデータを検索することができます。各ログには、 `log_summary` カラムに利用可能な属性がリストアップされています。さらに詳細を調べるには、ハイライトされた属性をクリックします。

<img
  title="New Relic Oneのログサマリーオプション"
  alt="New Relic Oneのログサマリーオプション"
  src={logSummaryQuery}
/>

<figcaption>
  Logs UIの各ログの概要には、追加、除外、置換などのクエリオプションがあります。
</figcaption>

## クエリの構造

Logs UIでは、 `new` や `relic` などの簡単なキーワードや、 `new relic agent` などのフレーズを検索フィールドに直接入力することで、ログデータを検索することができます。また、キーワードやフレーズと演算子を組み合わせて、より複雑なクエリを作成することもできます。

<Callout variant="tip">
  New Relic のログクエリは Lucene クエリ言語に基づいており、この文書に記載されているすべての Lucene 関数がサポートされています。(Lucene の機能が記載されていない場合は、サポートしていません。) 参考となる例は、 [Lucene tutorial](https://www.lucenetutorial.com/lucene-query-syntax.html) をご覧ください。
</Callout>

一般的なクエリのルール

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        ログクエリのルール
      </th>

      <th>
        コメント
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        大文字小文字の区別
      </td>

      <td>
        クエリの構文は、属性値の大文字と小文字を区別します。属性名は常に大文字と小文字を区別します。

        **例外：** ワイルドカード検索は、属性値の大文字・小文字を区別しません。
      </td>
    </tr>

    <tr>
      <td>
        特殊文字
      </td>

      <td>
        用語に特殊文字が含まれている場合は、用語をダブルクオートにして、バックスラッシュで特殊文字をエスケープします（` ˶‾᷄ -̫ ‾᷅˵ ）。これには、次のような特殊文字が含まれます。 +, -, & , |, !, (, ), {, }。, [, ], ^, " , ~, *, ?, :, /, or ˶‾᷄ -̫ ‾᷅˵.`

        \`例 " POST /log/v1 HTTP/1.1" 202 を問い合わせるには、次のように引用符をエスケープしてください。

        "" POST /log/v1 HTTP/1.1\\" 202"\`
      </td>
    </tr>

    <tr>
      <td>
        ワイルドカード検索
      </td>

      <td>
        アスタリスク（`*` ）を使用して、ゼロまたは複数の文字を置き換えるワイルドカード検索を実行できます。

        例： `新*レリック`
      </td>
    </tr>
  </tbody>
</table>

## テキストで検索 [#query-text]

より具体的な検索結果を得るためには、キーワードやフレーズを組み合わせたテキスト検索が有効です。

### テキスト演算子

Logsのクエリ構文では、以下のテキスト演算子を使用できます。

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        条件
      </th>

      <th>
        テキスト演算子の例
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        マッチング（キーワード）
      </td>

      <td>
        別々に入力したキーワードを含むログ結果を検索します。

        `"new" " relic"`
      </td>
    </tr>

    <tr>
      <td>
        完全一致（フレーズ）
      </td>

      <td>
        入力された特定のフレーズを含むログ結果を検索します。

        `"新しいレリックエージェント"`
      </td>
    </tr>

    <tr>
      <td>
        Either / Or
      </td>

      <td>
        入力されたキーワードのいずれか、または両方を含むログ結果を検索します。

        `ニューORレリック`
      </td>
    </tr>

    <tr>
      <td>
        そして
      </td>

      <td>
        入力されたキーワードの両方を含むログ結果を検索します。

        `新品と遺品`
      </td>
    </tr>

    <tr>
      <td>
        \* ワイルドカード（0個以上）
      </td>

      <td>
        入力されたキーワードの両方を含み、その間に0文字以上の文字があるログ結果を検索します。

        `ニュー*レリック`
      </td>
    </tr>

    <tr>
      <td>
        否定（キーワード）
      </td>

      <td>
        入力された特定のキーワードを含まないログ結果を検索します。

        `-新`
      </td>
    </tr>

    <tr>
      <td>
        否定（フレーズ）
      </td>

      <td>
        入力された特定の語句を含まないログ結果を検索します。

        `-"新しいレリック"`
      </td>
    </tr>
  </tbody>
</table>

## 属性で探す [#query-attributes]

特定の属性やフィールドにクエリ結果を絞り込むには、属性検索を使用します。

### 一般的なオペレーター

以下の演算子は、すべてのタイプの属性で使用できます。

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        条件
      </th>

      <th>
        一般的なオペレーターの例
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        イコール `。`
      </td>

      <td>
        属性が指定されたキーワードと一致するログ結果を検索します。例を示します。フィールド `ホスト名` は、 `気` に等しい。

        `ホストネーム：chi`
      </td>
    </tr>

    <tr>
      <td>
        `- とは異なります。`
      </td>

      <td>
        指定したキーワードと属性が一致しないログ結果を検索します。例を示します。フィールド `ホスト名` は、 `気` と一致しません。

        `-ホスト名：chi`
      </td>
    </tr>

    <tr>
      <td>
        `*を含みます。`
      </td>

      <td>
        属性に指定したキーワードが含まれるログ結果を検索します。例を示します。フィールド `ホスト名` には `気` が含まれています。

        `ホストネーム：*chi*さん`
      </td>
    </tr>

    <tr>
      <td>
        `- *を含みません。`
      </td>

      <td>
        属性に指定したキーワードが含まれていないログ結果を検索します。例を示します。フィールド `ホスト名` には `気` が含まれていません。

        `-ホスト名：*chi*。`
      </td>
    </tr>

    <tr>
      <td>
        `*で始まる。`
      </td>

      <td>
        指定されたキーワードで始まる属性を持つログ結果を検索します。例を示します。フィールド `ホスト名` で始まる `気` 。

        `ホストネーム:chi*`
      </td>
    </tr>

    <tr>
      <td>
        `*で終了します。`
      </td>

      <td>
        指定されたキーワードで属性が終了するログ結果を検索します。例を示します。フィールド `ホスト名` の末尾に `気`.

        `ホストネーム：*chi`
      </td>
    </tr>

    <tr>
      <td>
        持っています。
      </td>

      <td>
        指定したフィールドを持つログ結果を検索します。例 `user_name` というフィールドを持つ。

        `has:ユーザー名`
      </td>
    </tr>

    <tr>
      <td>
        ミッシング
      </td>

      <td>
        指定したフィールドが欠けているログ結果を検索します。例欠落しているフィールド `user_name`.

        `ユーザー名が表示されない`
      </td>
    </tr>
  </tbody>
</table>

### 数値演算子

以下の演算子は、数値属性でのみ使用できます。

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        条件
      </th>

      <th>
        数値演算子の例
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        より大きい
      </td>

      <td>
        指定したパラメータよりも大きいログ結果の属性一致を検索します。例を示します。フィールド `http_response_time_ms` が `500` よりも大きい場合。

        `http_response_time_ms:>500`
      </td>
    </tr>

    <tr>
      <td>
        より大きいか等しい
      </td>

      <td>
        指定されたパラメータ以上の属性マッチを持つログ結果を検索します。例を示します。フィールド `http_response_time_ms` は、 `500` と同じかそれ以上の値です。

        `http_response_time_ms:>=500`
      </td>
    </tr>

    <tr>
      <td>
        未満
      </td>

      <td>
        指定されたパラメータよりも小さい属性の一致を持つログ結果を検索します。例を示します。フィールド `http_response_time_ms` が `500` よりも小さい場合。

        `http_response_time_ms:<500`
      </td>
    </tr>

    <tr>
      <td>
        以下の場合
      </td>

      <td>
        指定されたパラメータ以下の属性マッチを持つログ結果を検索します。例を示します。フィールド `http_response_time_ms` が `500` と同等かそれ以下である。

        `http_response_time_ms:<=500`
      </td>
    </tr>
  </tbody>
</table>
