---
title: アプリとホストのデータのコンテキストでログを表示
tags:
  - Logs
  - Enable log management in New Relic
  - Configure logs in context
metaDescription: Link your log data with related data across the rest of the New Relic platform by configuring logs in context.
translationType: machine
---

import newRelicLogsInContextDiagram from 'images/new-relic-logs-in-context-diagram.png'

import demotronLogs123021 from 'images/demotron-logs-123021.png'

import logsInContextTraces from 'images/logs-in-context-traces.png'

New Relic の **logs in context** を有効にすると、お客様のログデータと当社の APM およびインフラストラクチャ エージェントから収集されたデータが相関します。つまり、APM、インフラストラクチャモニタリング、分散型トレース、エラーズインボックスなどの他の UI エクスペリエンスで、ログデータやログデータへのリンクが表示されることになります。そのログデータを使用して、アプリやホストのパフォーマンスをより深く掘り下げることができ、ログデータを手動で検索する必要はありません。

ログ・イン・コンテキストや [ログ・パターン](/docs/logs/ui-data/find-unusual-logs-log-patterns) が問題の根本原因の発見にどのように役立つかについては、この短いビデオ（約5分）をご覧ください。

<Video
  id="awCeXQZs2YE"
  type="youtube"
/>

## プラットフォーム全体の問題の根本原因を把握 [#compatibility-requirements]

アプリケーションとインフラストラクチャのすべてのデータを単一のソリューションにまとめることで、問題の根本原因をより早く把握することができます。また、ログの状況を把握することで、意味のあるパターンやトレンドを迅速に把握することができます。

次の図は、エージェントのメタデータによるエンリッチメント（コンテキストロギング）から、ログデータをフォーマットしてNew Relicに転送するまでの、ログメッセージのライフサイクルを示しています。

<img
  title="new-relic-logs-in-context-diagram.png"
  alt="New Relicのログをコンテキストダイアグラムで表示"
  src={newRelicLogsInContextDiagram}
/>

<figcaption>
  この図は、New Relicを介したログメッセージの流れを示しています。
</figcaption>

プラットフォームのさまざまな部分からすべてのログを絞り込もうとして余分な時間を費やすことはありません。その代わりに、問題を特定して解決するために必要なログラインを正確に見るために、ログをコンテキストで有効にします。

## コンテキストでのログ取得を可能にする基本プロセス [#enable-logs]

これは、New Relic APM の UI でログをコンテキストで表示した例です。選択した期間のイベントのコンテキストでログを確認したり、ハイライトされた属性の詳細データにドリルダウンしたりすることができます。さらに多くの機能を利用するには、 **Query logs** from here をクリックすると、 **Logs** UI に直接アクセスできます。

<img
  title="APM UIのコンテキストでのログの表示"
  alt="APM UIのコンテキストでのログの表示"
  src={demotronLogs123021}
/>

ここでは、APMやインフラ監視のために、ログをコンテキストで設定する方法を紹介します。

1. New Relic の [ロギングの設定がすでに完了していることを確認してください。これには、アプリケーションのログを収集し、New Relic に転送されるメタデータを拡張する、サポートされているログフォワーダーの設定が含まれます。](/docs/logs/enable-log-management-new-relic/enable-log-monitoring-new-relic/enable-log-management-new-relic)
2. [](/docs/logs/enable-log-management-new-relic/enable-log-monitoring-new-relic/enable-log-management-new-relic)
3. [APMのコンテキストでのログが必要な場合：まず、サポートされているAPMエージェントのバージョンにアップデートし、 ](/docs/logs/enable-log-management-new-relic/enable-log-monitoring-new-relic/enable-log-management-new-relic)[distributed tracing](/docs/distributed-tracing/concepts/introduction-distributed-tracing) を有効にしてください。具体的な手順については、お使いのエージェントを選択してください。

* [C SDK](/docs/logs/enable-log-management-new-relic/configure-logs-context/c-sdk-configure-logs-context)
* [Go](/docs/logs/enable-log-management-new-relic/configure-logs-context/configure-logs-context-go/)
* [Java](/docs/logs/enable-log-management-new-relic/configure-logs-context/java-configure-logs-context-all/)
* [.NET](/docs/logs/enable-log-management-new-relic/configure-logs-context/net-configure-logs-context-all/)
* [Node.js](/docs/logs/enable-log-management-new-relic/configure-logs-context/configure-logs-context-nodejs/)
* [PHP](/docs/logs/enable-log-management-new-relic/configure-logs-context/configure-logs-context-php/)
* [Python](/docs/logs/enable-log-management-new-relic/configure-logs-context/configure-logs-context-python/)
* [Ruby](/docs/logs/enable-log-management-new-relic/configure-logs-context/configure-logs-context-ruby/)

3. インフラストラクチャーの監視のためにログのコンテキストを必要とする場合は、 [enable logs in context for infrastructure agent](/docs/logs/enable-log-management-new-relic/enable-log-monitoring-new-relic/forward-your-logs-using-infrastructure-agent) を参照してください。
4. [ログデータを監視対象のアプリやホストのコンテキストで見る](#what-next).

## APIなどのオプション [#API]

当社のロギングソリューションがニーズに合わない場合は、他のオプションを使用してログデータをNew Relicに送信することができます。

* [エージェントのAPIコールによる拡張機能のロギング](/docs/logs/new-relic-logs/apm-integration/apm-agent-apis-manual-logs-context-instrumentation)
* [Log APIによるHTTPエンドポイント](/docs/logs/log-management/log-api/introduction-log-api/)
* [TCPエンドポイント経由のSyslogプロトコル](/docs/logs/log-management/log-api/use-tcp-endpoint-forward-logs-new-relic/) （CDN、ハードウェアデバイス、またはマネージドサービスに有効）

## 次のステップ [#what-next]

APMやインフラストラクチャーのモニタリングのためにコンテキストでログを設定した後は、New Relic One UIでログデータを最大限に活用しましょう。

* [Logs UI](/docs/logs/log-management/ui-data/use-logs-ui) を使って、プラットフォーム全体のロギングデータを調べてみましょう。
* [APM UI](/docs/logs/log-management/ui-data/use-logs-ui/#links) で、アプリケーションのパフォーマンスのコンテキストでログを確認できます。 [エラーのトラブルシューティング](/docs/apm/apm-ui-pages/error-analytics/errors-page-find-fix-verify-problems/) [分散型トレース](/docs/apm/distributed-tracing/ui-data/understand-use-distributed-tracing-data) 、スタックトレース、アプリケーションログなどを使用します。
* [インフラストラクチャ監視エージェント](/docs/logs/enable-log-management-new-relic/enable-log-monitoring-new-relic/forward-your-logs-using-infrastructure-agent/) でログを転送することで、アプリケーションとプラットフォームの両方のパフォーマンスデータをより深く把握することができます。 [インフラストラクチャーのログ](/docs/logs/log-management/ui-data/use-logs-ui/#links) をUIで確認することができます。
* [アラートの設定](/docs/alerts-applied-intelligence/new-relic-alerts/alert-conditions/create-alert-conditions/).
* [データのクエリ](/docs/query-your-data/explore-query-data/get-started/introduction-querying-new-relic-data/) と [ダッシュボードの作成](/docs/query-your-data/explore-query-data/dashboards/introduction-dashboards/).

ここでは、APMのUIから見える、アプリのトレース詳細のコンテキストにあるログの例を紹介します。

<img
  title="APM UIでのトレース詳細のためのコンテキストでのログ"
  alt="APM UIのトレース詳細のコンテキストでログを表示する"
  src={logsInContextTraces}
/>
