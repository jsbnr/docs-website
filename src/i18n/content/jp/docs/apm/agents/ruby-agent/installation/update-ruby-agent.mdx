---
title: Rubyエージェントの更新
tags:
  - Agents
  - Ruby agent
  - Installation
metaDescription: How to update your New Relic Ruby agent plus notes on EOL support for early agent versions.
translationType: machine
---

New Relic の最新機能、拡張機能、重要なセキュリティパッチを最大限に活用するために、Ruby エージェントを最新版にアップデートすることをお勧めします。特定のエージェントのアップデートに関する追加情報については、 [Ruby エージェントのリリースノート](/docs/release-notes/agent-release-notes/ruby-release-notes) を参照してください。

## Rubyエージェントのバージョンの確認 [#determine-versions]

アプリが現在使用しているRubyエージェントのバージョンを確認します。

1. New Relic では、 [アカウントのドロップダウン](/docs/accounts-partnerships/education/getting-started-new-relic/glossary#account-dropdown) から、 **アカウント設定> Connected agents** を選択します。
2. 任意です。Sort by **古いエージェントのバージョン**.

## エージェントの更新 [#Updating_the_Agent]

Rubyエージェントをアップデートするには

* Bundlerを使う。このコマンドを実行します。

  ```
  bundle update newrelic_rpm
  ```

* Bundlerを使用していません。このコマンドを実行してください。

  ```
  gem update newrelic_rpm
  ```

## 楽器 JRuby [#jruby]

正しいインストルメントのために

* JRuby のバージョンが 1.7 以上の場合、New Relic Ruby エージェントのバージョン [3.6.8.164 から 3.18.1](/docs/releases/ruby) を使用してください。
* JRuby のバージョン 9 以降では、New Relic Ruby エージェントのバージョン [3.6.8.164 以降を使用してください](/docs/releases/ruby) 。

そうしないと、アプリケーションにトランザクションがなく、JRuby を使用している場合、CPU メトリクスを見ることができません。これはJRubyのバグによるもので、 `Process.times` は経過したCPU時間ではなく、壁時計の時間を返していました。このバグは、New Relic の Ruby エージェント 3.6.8.164 および JRuby 1.7.0 で修正されました。

## 対応していないRubyエージェントのバージョン [#eol-versions]

**End of life notification:** 2015 年 1 月 26 日より、New Relic は Ruby エージェントのバージョンが **3.9.6 より前のものからのデータを受け付けなくなりました** 。

これらのエージェントのバージョンは、New Relicのデータ収集サービスと通信する際に期限切れプロトコルを使用しています。また、こうしたバージョンの多くは、重要なデータを誤ってNew Relicコレクターに送信するという、潜在的なセキュリティ上の問題も抱えています。

## サポート対象外のバージョンのエージェントのアップデート [#eol-update]

<Callout variant="important">
  メジャーバージョンのアップデートなど、以前のバージョンのエージェントからアップデートしている場合は、機能変更の以下のリストを見直してください。
</Callout>

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        移行
      </th>

      <th>
        コメント
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td id="migration-6-7">
        バージョン6から7へ
      </td>

      <td>
        リリースノート： [Ruby agent 7.0.0](/docs/release-notes/agent-release-notes/ruby-release-notes/ruby-agent-700)

        [Ruby Agent 6.x to 7.x migration guide](/docs/agents/ruby-agent/getting-started/migration-7x-guide/) には、以前のバージョンの Ruby Agent から 7.0.0 への移行に役立つ戦略やヒントが記載されています。このガイドでは、新しい構成設定、SSL CA 証明書の診断とインストール、廃止された項目とその代替品について説明しています。

        * Ruby 2.0と2.1のドロップ
        * ほとんどのRubyのgem/ライブラリにprefendの自動挿入ストラテジーを実装。
        * SSL証明書バンドルの削除
        * 非推奨の各種設定オプションを削除
      </td>
    </tr>

    <tr>
      <td id="migration-5-6">
        バージョン5から6へ
      </td>

      <td>
        リリースノート： [Ruby agent 6.0.0.351](/docs/release-notes/agent-release-notes/ruby-release-notes/ruby-agent-600351)

        柔軟なカスタムインストルメントのためのTracer APIの追加に伴い、いくつかのAPIが非推奨となりました。使用している場合は、更新する必要があります。詳細については、 [Ruby custom instrumentation](/docs/agents/ruby-agent/api-guides/ruby-custom-instrumentation) をご覧ください。
      </td>
    </tr>

    <tr>
      <td id="migration-4-5">
        バージョン4から5へ
      </td>

      <td>
        リリースノート： [Ruby agent 5.0.0.342](/docs/release-notes/agent-release-notes/ruby-release-notes/ruby-agent-500342)

        New RelicへのSSL接続が必須になりました。
      </td>
    </tr>

    <tr>
      <td id="migration-3-4">
        バージョン3から4へ
      </td>

      <td>
        リリースノート： [Ruby agent 4.0.0.332](/docs/release-notes/ruby-agent-400332)

        エージェントは、2.0より前のRubyバージョン、JRuby 1.7以前、およびRubiniusのすべてのバージョンをサポートしなくなりました。
      </td>
    </tr>

    <tr>
      <td id="deprecated-apis">
        非推奨のAPIコール
      </td>

      <td>
        非推奨のAPIコールとその代替品のリストについては、 [非推奨APIコールの更新](/docs/agents/ruby-agent/troubleshooting/update-deprecated-api-calls) を参照してください。
      </td>
    </tr>
  </tbody>
</table>
