---
title: newrelic_set_user_attributes (PHPエージェントAPI)
type: apiDoc
shortDescription: ユーザー関連のカスタム属性を作成します。newrelic_add_custom_parameterの方が柔軟性があります。
tags:
  - Agents
  - PHP agent
  - PHP agent API
metaDescription: New Relic PHP agent API call to attach user-related custom attributes to APM and browser events.
translationType: machine
---

## 構文

```
newrelic_set_user_attributes(string $user_value, string $account_value, string $product_value)
```

ユーザー関連のカスタム属性を作成します。newrelic_add_custom_parameterの方が柔軟性があります。

## 要件

エージェントのバージョン [3.1.5.111](/docs/release-notes/agent-release-notes/php-release-notes/php-agent-315111) 以上。

## 説明

<Callout variant="tip">
  このコールでは、既存のキーに値を割り当てることしかできません。より柔軟にキーと値のペアを作成するには、 [`newrelic_add_custom_parameter`](/docs/agents/php-agent/php-agent-api/newrelic_add_custom_parameter) をご利用ください。
</Callout>

リリース4.4以降、 `newrelic_set_user_attributes("a","b","c");` を呼び出すことは、 `newrelic_add_custom_parameter("user","a"); newrelic_add_custom_parameter("account","b"); newrelic_add_custom_parameter("product","c");` 3つのパラメータはすべて必須ですが、空の文字列でもかまいません。

## パラメータ

<table>
  <thead>
    <tr>
      <th width="25%">
        パラメーター
      </th>

      <th>
        説明
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `$user_value`

        _文字列_
      </td>

      <td>
        必須（空の文字列でも可）。このページビューに関連付ける名前またはユーザー名を指定します。この値は、 `ユーザー` キーに割り当てられます。
      </td>
    </tr>

    <tr>
      <td>
        `$account_value`

        _文字列_
      </td>

      <td>
        必須（空の文字列でも可）。このページビューに関連付けるユーザーアカウントの名前を指定します。この値は、 `account` キーに割り当てられます。
      </td>
    </tr>

    <tr>
      <td>
        `製品価値`

        _文字列_
      </td>

      <td>
        必須（空の文字列でも可）。このページビューに関連付ける製品の名前を指定します。この値は、 `製品` キーに割り当てられます。
      </td>
    </tr>
  </tbody>
</table>

## 戻り値

この関数は、属性の追加に成功した場合、 `true` を返します。

## 例

### 3つのユーザー属性を記録 [#record-three]

```
function example() {
    if (extension_loaded('newrelic')) { // Ensure PHP agent is available
        newrelic_set_user_attributes("MyUserName", "MyAccountName", "MyProductName");
    }
}
```

### 2つのユーザー属性と1つの空の属性を記録 [#record-two]

```
function example() {
    if (extension_loaded('newrelic')) { // Ensure PHP agent is available
        newrelic_set_user_attributes("MyUserName", "", "MyProductName");
    }
}
```
