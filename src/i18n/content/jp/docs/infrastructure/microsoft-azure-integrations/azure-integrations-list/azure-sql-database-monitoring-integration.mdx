---
title: Azure SQL Databaseモニタリングの統合
tags:
  - Integrations
  - Microsoft Azure integrations
  - Azure integrations list
metaDescription: 'New Relic''s Microsoft Azure SQL Database integration: what data it reports and how to enable it.'
translationType: machine
---

[New Relic の統合](/docs/infrastructure/integrations-getting-started/getting-started/introduction-infrastructure-integrations) には、 [Microsoft Azure SQL Database](https://azure.microsoft.com/en-us/services/sql-database/) メトリクスやその他のデータを New Relic に報告するための統合があります。このドキュメントでは、統合を有効にする方法と、報告されるデータについて説明します。

## 機能

New Relic は、Azure の完全に管理されたリレーショナル クラウド データベース サービスからデータベース データを収集します。Azure SQLは、独自のリソースセットを持つ単一のデータベースと、リソースセットを共有するエラスティックプールを提供します。どちらもAzure SQL Databaseの論理サーバーに関連付けられています。データベースがファイアウォールで保護されている場合は、レプリケートして以前の時点に復元することができます。

New Relicを使うと、以下のことができます。

* 事前に作成されたインフラストラクチャダッシュボードでAzure SQL Databaseのデータを表示します。
* [カスタムクエリの実行とデータの視覚化](/docs/using-new-relic/data/understand-data/query-new-relic-data).
* データの変化を通知するアラート条件を作成します。

## 統合を有効にする [#activate]

統合を有効にするには、標準的な手順に従って、 [New Relic](/docs/infrastructure/microsoft-azure-integrations/getting-started/activate-azure-integrations) で Azure サービスを有効にしてください。

## 設定およびポーリング [#polling]

[設定オプション](/docs/integrations/new-relic-integrations/getting-started/configure-polling-frequency-data-collection-cloud-integrations)を使用し、ポーリングの頻度を変更し、データを絞り込むことができます。

New Relic は、デフォルトの [ポーリング](/docs/integrations/microsoft-azure-integrations/getting-started/azure-integration-polling) の間隔に従って、Azure Database サービスに問い合わせを行いますが、その間隔はインテグレーションによって異なります。Azure SQL Database 統合のポーリング頻度です。

* ポーリングの間隔。5分
* 解像度は1データポイント/分

## データの検索と使用 [#find-and-use]

[統合データを調べるには](/docs/infrastructure/integrations/find-use-infrastructure-integration-data) 、 **[one.newrelic.com](https://one.newrelic.com) > インフラストラクチャ> Azure> （統合を選択）** 。

データはこのように整理されています。

<table>
  <thead>
    <tr>
      <th style={{ width: "200px" }}>
        **Azure SQL Databaseのデータ**
      </th>

      <th>
        **New Relicでの整理整頓**
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        シングルデータベース
      </td>

      <td>
        * 単一のデータベースに関するデータは、 `AzureSqlDatabaseSample` イベントタイプに添付されています。
        * インベントリデータは、 `プロバイダ` の値が `AzureSqlDatabase` 。
      </td>
    </tr>

    <tr>
      <td>
        弾性プール
      </td>

      <td>
        * エラスティックプールに関するデータは、 `AzureSqlElasticPoolSample`イベントタイプに添付されています。
        * インベントリデータは、 `プロバイダ` の値が `AzureSqlElasticPool` 。
      </td>
    </tr>

    <tr>
      <td>
        ファイアウォール
      </td>

      <td>
        * ファイアウォールに関するデータは、 `AzureSqlFirewallSample` イベントタイプに添付されています。
        * インベントリデータは、 `プロバイダ` の値が `AzureSqlFirewall`.
      </td>
    </tr>

    <tr>
      <td>
        データベースレプリケーションリンク
      </td>

      <td>
        * データベースレプリケーションリンクに関するデータは、 `AzureSqlReplicationLinkSample` イベントタイプに添付されています。
        * インベントリデータは、 `プロバイダ` の値が `AzureSqlReplicationLink` 。
      </td>
    </tr>

    <tr>
      <td>
        データベースの復元ポイント
      </td>

      <td>
        * データベースの復元ポイントに関するデータは、 `AzureSqlRestorePointSample` イベントタイプに添付されています。
        * インベントリデータは、 `プロバイダ` の値が `AzureSqlRestorePoint` 。
      </td>
    </tr>

    <tr>
      <td>
        ロジカルサーバー
      </td>

      <td>
        * 論理サーバーに関するデータは、 `AzureSqlServerSample` イベントタイプに添付されています。
        * インベントリデータは、 `プロバイダー` の値が `AzureSqlServer` 。
      </td>
    </tr>
  </tbody>
</table>

## メトリックデータ [#metrics]

この統合では、以下の [メトリックデータを収集します](/docs/infrastructure/integrations-getting-started/getting-started/understand-integration-data-data-types#metric) 。

### データベースサンプルのメトリクス [#database-sample]

<table>
  <thead>
    <tr>
      <th style={{ width: "300px" }}>
        メトリック
      </th>

      <th>
        説明
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `cpuPercent`
      </td>

      <td>
        平均的なCPUの割合です。
      </td>
    </tr>

    <tr>
      <td>
        `physicalDataReadPercent`
      </td>

      <td>
        平均データIO率。
      </td>
    </tr>

    <tr>
      <td>
        `logWritePercent`
      </td>

      <td>
        ログの平均IO率。
      </td>
    </tr>

    <tr>
      <td>
        `dtuConsumptionPercent`
      </td>

      <td>
        平均的なDTUの割合
      </td>
    </tr>

    <tr>
      <td>
        `ストレージ`
      </td>

      <td>
        データベースの総サイズ（単位：バイト）。
      </td>
    </tr>

    <tr>
      <td>
        `コネクションSuccessful`
      </td>

      <td>
        接続に成功した合計数
      </td>
    </tr>

    <tr>
      <td>
        `接続失敗`
      </td>

      <td>
        接続に失敗した合計数。
      </td>
    </tr>

    <tr>
      <td>
        `blockedByFirewall`
      </td>

      <td>
        ファイアウォールでブロックされたリクエストの総数。
      </td>
    </tr>

    <tr>
      <td>
        `デッドロック`
      </td>

      <td>
        デッドロックの総数。
      </td>
    </tr>

    <tr>
      <td>
        `ストレージパーセンテージ`
      </td>

      <td>
        データベースのサイズの割合。
      </td>
    </tr>

    <tr>
      <td>
        `xtpStoragePercent`
      </td>

      <td>
        平均的なインメモリOLTPストレージの割合。
      </td>
    </tr>

    <tr>
      <td>
        `workersPercent`
      </td>

      <td>
        平均的な労働者の割合。
      </td>
    </tr>

    <tr>
      <td>
        `sessionsPercent`
      </td>

      <td>
        平均的なセッションの割合。
      </td>
    </tr>

    <tr>
      <td>
        `dtuLimit`
      </td>

      <td>
        DTUリミットの平均数
      </td>
    </tr>

    <tr>
      <td>
        `dtuUed`
      </td>

      <td>
        平均使用DTU数
      </td>
    </tr>

    <tr>
      <td>
        `dwuLimit`
      </td>

      <td>
        DWU制限。
      </td>
    </tr>

    <tr>
      <td>
        `dwuConsumptionPercent`
      </td>

      <td>
        DWUの割合
      </td>
    </tr>

    <tr>
      <td>
        `dwuUsed`
      </td>

      <td>
        使用されたDWUの数
      </td>
    </tr>

    <tr>
      <td>
        `dwCpuPercent`
      </td>

      <td>
        DWノードレベルのCPUパーセンテージの平均値。
      </td>
    </tr>

    <tr>
      <td>
        `dwPhysicalDataReadPercent`
      </td>

      <td>
        DWノードレベルのデータIO率の平均値。
      </td>
    </tr>

    <tr>
      <td>
        `databaseSizeCurrentBytes`
      </td>

      <td>
        現在のデータベースの合計サイズ（バイト）。
      </td>
    </tr>

    <tr>
      <td>
        `データベースサイズ制限バイト`
      </td>

      <td>
        データベースの制限値（バイト）。
      </td>
    </tr>

    <tr>
      <td>
        `cpuLimit`
      </td>

      <td>
        CPUの平均的な制限値です。vCoreベースのデータベースに適用されます。
      </td>
    </tr>
  </tbody>
</table>

### Elastic Pool サンプルメトリクス [#elastic-pool]

<table>
  <thead>
    <tr>
      <th style={{ width: "300px" }}>
        メトリック
      </th>

      <th>
        説明
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `cpuPercent`
      </td>

      <td>
        平均的なCPUの割合です。
      </td>
    </tr>

    <tr>
      <td>
        `databaseCpuPercent`
      </td>

      <td>
        データベースごとの平均CPU率。
      </td>
    </tr>

    <tr>
      <td>
        `physicalDataReadPercent`
      </td>

      <td>
        平均データIO率。
      </td>
    </tr>

    <tr>
      <td>
        `databasePhysicalDataReadPercent`
      </td>

      <td>
        データベースごとの平均データIO率。
      </td>
    </tr>

    <tr>
      <td>
        `logWritePercent`
      </td>

      <td>
        ログの平均IO率。
      </td>
    </tr>

    <tr>
      <td>
        `databaseLogWritePercent`
      </td>

      <td>
        データベースごとの平均ログIO率。
      </td>
    </tr>

    <tr>
      <td>
        `dtuConsumptionPercent`
      </td>

      <td>
        平均的なDTUの割合
      </td>
    </tr>

    <tr>
      <td>
        `データベースDtuConsumptionPercent`
      </td>

      <td>
        データベースごとの平均DTU率
      </td>
    </tr>

    <tr>
      <td>
        `ストレージパーセンテージ`
      </td>

      <td>
        平均保存率。
      </td>
    </tr>

    <tr>
      <td>
        `workersPercent`
      </td>

      <td>
        平均的な労働者の割合。
      </td>
    </tr>

    <tr>
      <td>
        `DatabaseWorkersPercent`
      </td>

      <td>
        データベースごとの平均ワーカー率。
      </td>
    </tr>

    <tr>
      <td>
        `sessionsPercent`
      </td>

      <td>
        平均的なセッションの割合。
      </td>
    </tr>

    <tr>
      <td>
        `databaseSessionsPercent`
      </td>

      <td>
        データベースごとの平均セッション率。
      </td>
    </tr>

    <tr>
      <td>
        `eDTULimit`
      </td>

      <td>
        平均的なDTUの限界。
      </td>
    </tr>

    <tr>
      <td>
        `ストレージリミットバイト`
      </td>

      <td>
        平均的なストレージの上限（単位：バイト）。
      </td>
    </tr>

    <tr>
      <td>
        `eDTU使用`
      </td>

      <td>
        平均使用eDTU。
      </td>
    </tr>

    <tr>
      <td>
        `ストレージ使用バイト`
      </td>

      <td>
        平均的に使用されているストレージのサイズ（単位：バイト）。
      </td>
    </tr>

    <tr>
      <td>
        `databaseStorageUsedBytes`
      </td>

      <td>
        データベースあたりの平均使用ストレージ量（単位：バイト）。
      </td>
    </tr>

    <tr>
      <td>
        `xtpStoragePercent`
      </td>

      <td>
        平均的なインメモリOLTPストレージの割合。
      </td>
    </tr>
  </tbody>
</table>

### サーバーのサンプルメトリクス [#server-sample]

<table>
  <thead>
    <tr>
      <th style={{ width: "300px" }}>
        メトリック
      </th>

      <th>
        説明
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `dtuCurrent`
      </td>

      <td>
        データベースのDTUを基準とした平均利用率。
      </td>
    </tr>

    <tr>
      <td>
        `dtuLimit`
      </td>

      <td>
        データベースのDTU制限。
      </td>
    </tr>
  </tbody>
</table>

## インベントリデータ [#inventory]

<Callout
  variant="important"
  title="有効期限（EOL）の通知"
>
  2022年3月以降は、クラウド統合用のインベントリデータなど、いくつかの機能のサポートを終了します。この移行に向けて簡単に準備できる方法など、詳細については、 [Explorers Hubの投稿](https://discuss.newrelic.com/t/important-upcoming-changes-to-capabilities-and-support-across-errors-classic-labels-service-infrastructure-on-host-snmp-integration-and-inventory-data-in-cloud-integrations/175370) をご覧ください。
</Callout>

この統合では、システムの状態や構成に関する以下の [インベントリデータを収集します。](/docs/infrastructure/integrations-getting-started/getting-started/understand-integration-data-data-types#inventory-data)

### [azure/sql/database/ \[#inventory-sql-database\]](/docs/infrastructure/integrations-getting-started/getting-started/understand-integration-data-data-types#inventory-data)

* * `コレーション`

  * `作成日`

  * `defaultSecondaryLocation`

  * `最早RestoreDate`

  * `版`

  * `elasticPoolName`

  * `isDataWarehouse`

  * `maxSizeBytes`

  * `name`

  * `リージョン名`

  * `リソースグループ名`

  * `sqlServerName`

  * `ステータス`

  * `transparentDataEncryptionStatus`

  * `種類`

### [azure/sql/elasticpool/ \[#inventory-elasticpool\]](/docs/infrastructure/integrations-getting-started/getting-started/understand-integration-data-data-types#inventory-data)

* * `作成日`

  * `データベースDtuMax`

  * `database DtuMin`

  * `dtu`

  * `版`

  * `name`

  * `リージョン名`

  * `リソースグループ名`

  * `sqlServerName`

  * `ステート`

  * `ストレージMB`

  * `種類`

### [azure/sql/firewall \[#inventory-firewall\]](/docs/infrastructure/integrations-getting-started/getting-started/understand-integration-data-data-types#inventory-data)

* * `endIpAddress`

  * `name`

  * `リージョン名`

  * `リソースグループ名`

  * `sqlServerName`

  * `startIpAddress`

### [azure/sql/replication-link/ \[#inventory-replication-link\]](/docs/infrastructure/integrations-getting-started/getting-started/understand-integration-data-data-types#inventory-data)

* * `データベース名`

  * `name`

  * `partnerDatabase`

  * `パートナーロケーション`

  * `リージョン名`

  * `replicationState`

  * `リソースグループ名`

  * `役割`

  * `sqlServerName`

  * `開始時間`

### [azure/sql/restore-point/ \[#inventory-restore-point\]](/docs/infrastructure/integrations-getting-started/getting-started/understand-integration-data-data-types#inventory-data)

* * `データベース名`

  * `最早RestoreDate`

  * `name`

  * `リージョン名`

  * `リソースグループ名`

  * `restorePointType`

  * `sqlServerName`
