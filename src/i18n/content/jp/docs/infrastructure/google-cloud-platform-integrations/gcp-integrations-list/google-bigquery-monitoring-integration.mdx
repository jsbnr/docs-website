---
title: Google BigQueryモニタリングの統合
tags:
  - Integrations
  - Google Cloud Platform integrations
  - GCP integrations list
metaDescription: 'New Relic''s Google BigQuery integration: how to activate it and what data it reports.'
translationType: machine
---

New Relic の [Google Cloud Platform (GCP)](https://cloud.google.com/) との統合には、 [Google BigQuery](https://cloud.google.com/bigquery/) のデータを New Relic にレポートする統合があります。このドキュメントでは、Google BigQuery インテグレーションを有効にする方法と、レポート可能なデータについて説明します。

## 機能

Google BigQuery は、インフラストラクチャを管理する必要のないデータウェアハウスです。BigQueryでは、データスキーマを指定することも、サービスがデータスキーマを発見することもできます。SQLクエリを使用してデータを探索することができます。

## 統合を有効にする [#activate]

統合を有効にするには、標準的な手順に従って [GCP サービスを New Relic](/docs/connect-google-cloud-platform-services-infrastructure) に接続してください。

## ポーリング頻度 [#polling]

New Relic の統合は、統合に応じて異なるポーリング間隔に従って GCP サービスに問い合わせます。Google BigQuery 統合のポーリング間隔は 5 分です。解像度については、 [メトリックデータの詳細](#metrics) を参照してください。

## テーブルメトリクスの有効化 [#table-metrics]

BigQueryテーブルメトリクスの収集は、デフォルトで無効になっています。これは、 [GcpBigQueryTableSample](#table-sample) に記載されているメトリクスに影響します。これらのメトリクスを収集するには、BigQuery統合の設定メニューにある"Enable table metrics" 設定をオンにします。

## データの検索と使用 [#find-data]

統合を有効にして数分（ポーリング頻度に基づく [](#polling)）待つと、データが New Relic UI に表示されます。 [ダッシュボードやアラート設定へのリンクを含むデータ](/docs/infrastructure/integrations/find-use-infrastructure-integration-data) を見つけて使用するには、 [**one.newrelic.com**](http://one.newrelic.com) **> インフラストラクチャー> GCP> (select an integration)** をご覧ください。

## メトリックデータ [#metrics]

New Relic で Google BigQuery 統合の [メトリックデータ](/docs/telemetry-data-platform/understand-data/new-relic-data-types/#metrics) を表示するには、 [NRQL クエリを作成します](/docs/integrations/new-relic-integrations/getting-started/use-integration-data-new-relic-insights#nrql) `GcpBigQueryProjectSample` 、 `GcpBigQueryDatasetSample` 、 `GcpBigQueryTableSample` [イベント](/docs/using-new-relic/welcome-new-relic/getting-started/glossary#event) とその属性を指定します。

### GcpBigQueryProjectSample [#project-sample]

Query `GcpBigQueryProjectSample` イベントをNew Relicで実行すると、以下のメトリクスのデータが表示されます。分解能は、1 分間に 1 つのデータポイントで、8 分間の遅延があります。

<dd>
  <table>
    <thead>
      <tr>
        <th style={{ width: "300px" }}>
          属性
        </th>

        <th>
          説明
        </th>
      </tr>
    </thead>

    <tbody>
      <tr>
        <td>
          `query.Count`
        </td>

        <td>
          機内での問い合わせ。
        </td>
      </tr>

      <tr>
        <td>
          `query.ExecutionTimes`
        </td>

        <td>
          クエリ実行時間の分布
        </td>
      </tr>

      <tr>
        <td>
          `slots.Allocated`
        </td>

        <td>
          プロジェクトに現在割り当てられているスロットの数
        </td>
      </tr>

      <tr>
        <td>
          `slots.AllocatedForProject`
        </td>

        <td>
          プロジェクトのクエリジョブに現在割り当てられているスロットの数。
        </td>
      </tr>

      <tr>
        <td>
          `slots.AllocatedForProjectAndJobType`
        </td>

        <td>
          プロジェクトや職種に現在割り当てられているスロットの数。
        </td>
      </tr>

      <tr>
        <td>
          `Slots.AllocatedForReservation`
        </td>

        <td>
          予約でプロジェクトに割り当てられているスロットの数
        </td>
      </tr>

      <tr>
        <td>
          `slots.TotalAllocatedForReservation`
        </td>

        <td>
          予約でプロジェクトに割り当てられているスロットの数。
        </td>
      </tr>

      <tr>
        <td>
          `利用可能なスロット数`
        </td>

        <td>
          プロジェクトで利用可能なスロットの総数です。
        </td>
      </tr>
    </tbody>
  </table>
</dd>

### GcpBigQueryDatasetSample [#dataset-sample]

Query `GcpBigQueryDatasetSample` イベントをNew Relicで実行すると、以下のメトリクスのデータが表示されます。解像度は30分ごとに1つのデータポイントで、3時間の遅延があります。

<dd>
  <table>
    <thead>
      <tr>
        <th style={{ width: "300px" }}>
          属性
        </th>

        <th>
          説明
        </th>
      </tr>
    </thead>

    <tbody>
      <tr>
        <td>
          `storage.StoredBytes`
        </td>

        <td>
          蓄積されたバイトの量
        </td>
      </tr>

      <tr>
        <td>
          `ストレージ.テーブル`
        </td>

        <td>
          テーブルの数。
        </td>
      </tr>
    </tbody>
  </table>
</dd>

### GcpBigQueryTableSample [#table-sample]

Query `GcpBigQueryTableSample` イベントで、以下のメトリクスのデータを表示します。分解能は1分間に1つのデータポイントで、6時間の遅延があります。

<dd>
  <table>
    <thead>
      <tr>
        <th style={{ width: "300px" }}>
          属性
        </th>

        <th>
          説明
        </th>
      </tr>
    </thead>

    <tbody>
      <tr>
        <td>
          `storage.UploadedBytes`
        </td>

        <td>
          アップロードされたバイト
        </td>
      </tr>

      <tr>
        <td>
          `storage.UploadedBytesBilled`
        </td>

        <td>
          アップロードされたバイトが課金されます。現在はストリーミングAPIのみ課金されます。
        </td>
      </tr>

      <tr>
        <td>
          `storage.UploadedRowCount`
        </td>

        <td>
          アップロードされた列。
        </td>
      </tr>
    </tbody>
  </table>
</dd>

## インベントリデータ [#inventory]

<Callout
  variant="important"
  title="有効期限（EOL）の通知"
>
  2022年3月以降は、クラウド統合用のインベントリデータなど、いくつかの機能のサポートを終了します。この移行に向けて簡単に準備できる方法など、詳細については、 [Explorers Hubの投稿](https://discuss.newrelic.com/t/important-upcoming-changes-to-capabilities-and-support-across-errors-classic-labels-service-infrastructure-on-host-snmp-integration-and-inventory-data-in-cloud-integrations/175370) をご覧ください。
</Callout>

[インベントリデータ](/docs/integrations/new-relic-integrations/getting-started/understand-use-data-infrastructure-integrations#overview) を Google BigQuery サービスで表示するには、 [**one.newrelic.com**](https://one.newrelic.com) **> インフラストラクチャー> インベントリ** を検索し、以下の属性を選択してください。

アスタリスクで示されたデータ `*` は、GCP プロジェクトがサービスアカウントを通じて New Relic にリンクされている場合、および [拡張インベントリコレクション](/docs/integrations/new-relic-integrations/getting-started/configure-polling-frequency-data-collection-cloud-integrations#extended) がオンになっている場合にのみ取得されます。

### gcp/bigquery/project

<dd>
  <table>
    <thead>
      <tr>
        <th style={{ width: "300px" }}>
          名前
        </th>

        <th>
          説明
        </th>
      </tr>
    </thead>

    <tbody>
      <tr>
        <td>
          `プロジェクトID`
        </td>

        <td>
          プロジェクトのIDです。
        </td>
      </tr>
    </tbody>
  </table>
</dd>

### gcp/bigquery/dataset

<dd>
  <table>
    <thead>
      <tr>
        <th style={{ width: "300px" }}>
          名前
        </th>

        <th>
          説明
        </th>
      </tr>
    </thead>

    <tbody>
      <tr>
        <td>
          `プロジェクトID`
        </td>

        <td>
          プロジェクトのIDです。
        </td>
      </tr>

      <tr>
        <td>
          `name`
        </td>

        <td>
          インスタンスがある地域。
        </td>
      </tr>

      <tr>
        <td>
          `ゾーン`
        </td>

        <td>
          データセットの位置。
        </td>
      </tr>

      <tr>
        <td>
          `説明文`
        </td>

        <td>
          データセットの説明。
        </td>
      </tr>

      <tr>
        <td>
          `作成時間`
        </td>

        <td>
          データセットが作成された時のタイムスタンプ。
        </td>
      </tr>

      <tr>
        <td>
          `lastModified*（最終更新日`
        </td>

        <td>
          データセットまたはそのテーブルが最後に変更された日時。
        </td>
      </tr>

      <tr>
        <td>
          `defaultTableLifeTime*（デフォルトテーブルライフタイム`
        </td>

        <td>
          データセット内のすべてのテーブルのデフォルトの寿命をミリ秒単位で指定します。
        </td>
      </tr>

      <tr>
        <td>
          フレンドリーネーム
        </td>

        <td>
          データセットのユーザーフレンドリーな名前。
        </td>
      </tr>

      <tr>
        <td>
          セルフリンク
        </td>

        <td>
          リソースにアクセスするためのURLです。
        </td>
      </tr>

      <tr>
        <td>
          `ラベル`
        </td>

        <td>
          データセットのラベルです。
        </td>
      </tr>
    </tbody>
  </table>
</dd>

### gcp/bigquery/table

<dd>
  <table>
    <thead>
      <tr>
        <th style={{ width: "300px" }}>
          名前
        </th>

        <th>
          説明
        </th>
      </tr>
    </thead>

    <tbody>
      <tr>
        <td>
          `プロジェクトID`
        </td>

        <td>
          プロジェクトのIDです。
        </td>
      </tr>

      <tr>
        <td>
          `データセットID`
        </td>

        <td>
          データセットのIDです。
        </td>
      </tr>

      <tr>
        <td>
          `name`
        </td>

        <td>
          テーブルのIDです。
        </td>
      </tr>

      <tr>
        <td>
          `ゾーン`
        </td>

        <td>
          テーブルの位置です。
        </td>
      </tr>

      <tr>
        <td>
          `作成時間`
        </td>

        <td>
          テーブルが作成された時のタイムスタンプ。
        </td>
      </tr>

      <tr>
        <td>
          `タイプ※1`
        </td>

        <td>
          テーブルの種類です。
        </td>
      </tr>

      <tr>
        <td>
          `説明文`
        </td>

        <td>
          テーブルの説明です。
        </td>
      </tr>

      <tr>
        <td>
          `expirationTime*。`
        </td>

        <td>
          テーブルの期限が切れるタイムスタンプ。
        </td>
      </tr>

      <tr>
        <td>
          `フレンドリーネーム`
        </td>

        <td>
          ユーザーフレンドリーなテーブル名です。
        </td>
      </tr>

      <tr>
        <td>
          `セルフリンク`
        </td>

        <td>
          リソースにアクセスするためのURLです。
        </td>
      </tr>

      <tr>
        <td>
          `ラベル`
        </td>

        <td>
          テーブルのラベル。
        </td>
      </tr>

      <tr>
        <td>
          `lastModified*（最終更新日`
        </td>

        <td>
          テーブルが最後に修正された時間。
        </td>
      </tr>
    </tbody>
  </table>
</dd>

## メモ

2018年11月20日現在、メトリック `storage/uploaded_bytes_billed` については、データがストリーミングでBigQueryにアップロードされている場合にのみ情報が得られます。
